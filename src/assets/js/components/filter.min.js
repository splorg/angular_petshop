/*! UIkit 3.14.1 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitfilter",["uikit-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).UIkitFilter=e(t.UIkit.util)}(this,(function(t){"use strict";function e(e){return function(e,n,s){const r=[[]];for(const o of e){if(!t.isVisible(o))continue;let e=i(o);for(let t=r.length-1;t>=0;t--){const a=r[t];if(!a[0]){a.push(o);break}let l;if(a[0].offsetParent===o.offsetParent?l=i(a[0]):(e=i(o,!0),l=i(a[0],!0)),e[n]>=l[s]-1&&e[n]!==l[n]){r.push([o]);break}if(e[s]-1>l[n]||e[n]===l[n]){a.push(o);break}if(0===t){r.unshift([o]);break}}}return r}(e,"top","bottom")}function i(e,i){void 0===i&&(i=!1);let{offsetTop:n,offsetLeft:s,offsetHeight:r,offsetWidth:o}=e;return i&&([n,s]=t.offsetPosition(e)),{top:n,left:s,bottom:n+r,right:s+o}}const n="uk-transition-leave",s="uk-transition-enter";function r(e,i,r,c){void 0===c&&(c=0);const f=o(i,!0),h={opacity:1},d={opacity:0},u=t=>()=>f===o(i)?t():Promise.reject(),p=u((()=>(t.addClass(i,n),Promise.all(l(i).map(((e,i)=>new Promise((n=>setTimeout((()=>t.Transition.start(e,d,r/2,"ease").then(n)),i*c)))))).then((()=>t.removeClass(i,n)))))),m=u((()=>{const n=t.height(i);return t.addClass(i,s),e(),t.css(t.children(i),{opacity:0}),new Promise((e=>requestAnimationFrame((()=>{const a=t.children(i),u=t.height(i);t.css(i,"alignContent","flex-start"),t.height(i,n);const p=l(i);t.css(a,d);const m=p.map(((e,i)=>new Promise((n=>setTimeout((()=>t.Transition.start(e,h,r/2,"ease").then(n)),i*c)))));n!==u&&m.push(t.Transition.start(i,{height:u},r/2+p.length*c,"ease")),Promise.all(m).then((()=>{t.removeClass(i,s),f===o(i)&&(t.css(i,{height:"",alignContent:""}),t.css(a,{opacity:""}),delete i.dataset.transition),e()}))}))))}));return t.hasClass(i,n)?a(i).then(m):t.hasClass(i,s)?a(i).then(p).then(m):p().then(m)}function o(e,i){return i&&(e.dataset.transition=1+o(e)),t.toNumber(e.dataset.transition)||0}function a(e){return Promise.all(t.children(e).filter(t.Transition.inProgress).map((e=>new Promise((i=>t.once(e,"transitionend transitioncanceled",i))))))}function l(i){return e(t.children(i)).reduce(((e,i)=>e.concat(t.sortBy(i.filter((e=>t.isInView(e))),"offsetLeft"))),[])}function c(e,i,n){return new Promise((s=>requestAnimationFrame((()=>{let r=t.children(i);const o=r.map((t=>f(t,!0))),a=t.css(i,["height","padding"]);t.Transition.cancel(i),r.forEach(t.Transition.cancel),h(i),e(),r=r.concat(t.children(i).filter((e=>!t.includes(r,e)))),Promise.resolve().then((()=>{t.fastdom.flush();const e=t.css(i,["height","padding"]),[l,c]=function(e,i,n){const s=i.map(((e,i)=>!(!t.parent(e)||!(i in n))&&(n[i]?t.isVisible(e)?d(e):{opacity:0}:{opacity:t.isVisible(e)?1:0}))),r=s.map(((s,r)=>{const o=t.parent(i[r])===e&&(n[r]||f(i[r]));if(!o)return!1;if(s){if(!("opacity"in s)){const{opacity:t}=o;t%1?s.opacity=1:delete o.opacity}}else delete o.opacity;return o}));return[s,r]}(i,r,o);r.forEach(((e,i)=>c[i]&&t.css(e,c[i]))),t.css(i,{display:"block",...a}),requestAnimationFrame((()=>{const o=r.map(((e,s)=>t.parent(e)===i&&t.Transition.start(e,l[s],n,"ease"))).concat(t.Transition.start(i,e,n,"ease"));Promise.all(o).then((()=>{r.forEach(((e,n)=>t.parent(e)===i&&t.css(e,"display",0===l[n].opacity?"none":""))),h(i)}),t.noop).then(s)}))}))}))))}function f(e,i){const n=t.css(e,"zIndex");return!!t.isVisible(e)&&{display:"",opacity:i?t.css(e,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===n?t.index(e):n,...d(e)}}function h(e){t.css(e.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",marginTop:"",marginLeft:"",transform:"",width:"",zIndex:""}),t.css(e,{height:"",display:"",padding:""})}function d(e){const{height:i,width:n}=t.offset(e),{top:s,left:r}=t.position(e),{marginLeft:o,marginTop:a}=t.css(e,["marginTop","marginLeft"]);return{top:s,left:r,height:i,width:n,marginLeft:o,marginTop:a,transform:""}}var u={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(e,i){void 0===i&&(i=this.$el);const n=this.animation,s="fade"===n?r:"delayed-fade"===n?function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r(...e,40)}:n?c:()=>(e(),Promise.resolve());return s(e,i,this.duration).then((()=>this.$update(i,"resize")),t.noop)}}},p={mixins:[u],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:{get(e,i){let{attrItem:n}=e;return t.$$("["+n+"],[data-"+n+"]",i)},watch(){if(this.updateState(),!1!==this.selActive){const e=t.$$(this.selActive,this.$el);this.toggles.forEach((i=>t.toggleClass(i,this.cls,t.includes(e,i))))}},immediate:!0},children:{get(e,i){let{target:n}=e;return t.$$(n+" > *",i)},watch(t,e){var i,n;e&&(n=e,(i=t).length!==n.length||!i.every((t=>n.includes(t))))&&this.updateState()},immediate:!0}},events:[{name:"click",delegate(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler(t){t.preventDefault(),this.apply(t.current)}}],methods:{apply(e){const i=this.getState(),n=g(e,this.attrItem,this.getState());var s,r;s=i,r=n,["filter","sort"].every((e=>t.isEqual(s[e],r[e])))||this.setState(n)},getState(){return this.toggles.filter((e=>t.hasClass(e,this.cls))).reduce(((t,e)=>g(e,this.attrItem,t)),{filter:{"":""},sort:[]})},setState(e,i){void 0===i&&(i=!0),e={filter:{"":""},sort:[],...e},t.trigger(this.$el,"beforeFilter",[this,e]),this.toggles.forEach((i=>t.toggleClass(i,this.cls,!!function(e,i,n){let{filter:s={"":""},sort:[r,o]}=n;const{filter:a="",group:l="",sort:c,order:f="asc"}=m(e,i);return t.isUndefined(c)?l in s&&a===s[l]||!a&&l&&!(l in s)&&!s[""]:r===c&&o===f}(i,this.attrItem,e)))),Promise.all(t.$$(this.target,this.$el).map((n=>{const s=()=>{!function(e,i,n){const s=function(e){let{filter:i}=e,n="";return t.each(i,(t=>n+=t||"")),n}(e);n.forEach((e=>t.css(e,"display",s&&!t.matches(e,s)?"none":"")));const[r,o]=e.sort;if(r){const e=function(e,i,n){return[...e].sort(((e,s)=>t.data(e,i).localeCompare(t.data(s,i),void 0,{numeric:!0})*("asc"===n||-1)))}(n,r,o);t.isEqual(e,n)||t.append(i,e)}}(e,n,t.children(n)),this.$update(this.$el)};return i?this.animate(s,n):s()}))).then((()=>t.trigger(this.$el,"afterFilter",[this])))},updateState(){t.fastdom.write((()=>this.setState(this.getState(),!1)))}}};function m(e,i){return t.parseOptions(t.data(e,i),["filter"])}function g(e,i,n){const s=m(e,i),{filter:r,group:o,sort:a,order:l="asc"}=s;return(r||t.isUndefined(a))&&(o?r?(delete n.filter[""],n.filter[o]=r):(delete n.filter[o],(t.isEmpty(n.filter)||""in n.filter)&&(n.filter={"":r||""})):n.filter={"":r||""}),t.isUndefined(a)||(n.sort=[a,l]),n}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("filter",p),p}));
